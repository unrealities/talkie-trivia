appId: com.unrealities.talkietrivia
---
- launchApp:
    clearState: true

# 0. WAIT FOR DATA LOAD
- extendedWaitUntil:
    visible: "Search for a movie title..."
    timeout: 45000

# 1. Handle Onboarding / Login
- tapOn: "Profile.*" 

# Debug wait
- extendedWaitUntil:
    visible: "Sign In with Google"
    timeout: 5000

- tapOn: "Sign In with Google" 

# Assert on the BUTTON changing, which confirms auth state
- extendedWaitUntil:
    visible: "Sign Out E2E User"
    timeout: 8000

# 2. Go back to Game to play
- tapOn: "Game.*"
- extendedWaitUntil:
    visible: "Search for a movie title..."
    timeout: 5000

# 3. Search for a wrong movie
- tapOn: "Search for a movie title..."
- inputText: "Titanic"
- extendedWaitUntil:
    visible: "Titanic (1997)"
    timeout: 5000
- tapOn: "Titanic (1997)"

# Verify feedback
- extendedWaitUntil:
    visible: "Not quite! Try again."
    timeout: 3000

# 4. Use a Hint
- tapOn: "Need a Hint?.*" 
- tapOn: "Director"
- extendedWaitUntil:
    visible: "Christopher Nolan"
    timeout: 3000

# 5. Win the Game
- tapOn: "Search for a movie title..."
- inputText: "Inception"
- extendedWaitUntil:
    visible: "Inception (2010)"
    timeout: 3000
- tapOn: "Inception (2010)"

# 6. Verify Win State
- extendedWaitUntil:
    visible: "You Got It!"
    timeout: 5000
- assertVisible: "Share Your Result"

# 7. Verify Persistence
- tapOn: "Profile.*"
- extendedWaitUntil:
    visible: "Games Played: 1"
    timeout: 5000
- assertVisible: "Current Streak: 1"
