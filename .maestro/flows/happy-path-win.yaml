appId: com.unrealities.talkietrivia
---
- launchApp:
    clearState: true

# 1. Wait for app
- extendedWaitUntil:
    visible: "Find the title!"
    timeout: 10000

# 2. Try tapping by relative position if text fails (last resort),
# OR use a regex to catch "Profile, tab, 2 of 2"
- tapOn:
    text: "Profile.*" # Regex match
    retryTapIfNoChange: false 
- tapOn: "Sign In with Google" 
- assertVisible: "Welcome, E2E User!"
- tapOn: "Game.*" # Regex match for Game tab

# 3. Search for a wrong movie
- tapOn: "search-input"
- inputText: "Titanic"
- tapOn: "result-item-Titanic"
# Verify feedback
- assertVisible: "Not quite! Try again."

# 4. Use a Hint (Inception is the forced movie)
- tapOn: "Need a Hint?"
- tapOn: "Director"
- assertVisible: "Christopher Nolan"

# 5. Win the Game
- tapOn: "search-input"
- inputText: "Inception"
- tapOn: "result-item-Inception"

# 6. Verify Win State
- assertVisible: "You Got It!"
- assertVisible: "Share Your Result"

# 7. Verify Persistence (Go to profile)
- tapOn: "Profile"
- assertVisible: "Games Played: 1"
- assertVisible: "Current Streak: 1"
