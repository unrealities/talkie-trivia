appId: com.unrealities.talkietrivia
---
- launchApp:
    clearState: true

# 0. WAIT FOR DATA LOAD
- extendedWaitUntil:
    visible: "Search for a movie title..."
    timeout: 15000

# DISMISS TOOLTIP 1
- tapOn: 
    text: "Got it"
    optional: true

# 1. Handle Onboarding / Login
- tapOn: "Profile.*" 

- extendedWaitUntil:
    visible: "Sign In with Google"
    timeout: 5000

- tapOn: "Sign In with Google" 

- extendedWaitUntil:
    visible: "Sign Out E2E User"
    timeout: 8000

# 2. Go back to Game
- tapOn: "Game.*"
- extendedWaitUntil:
    visible: "Search for a movie title..."
    timeout: 5000

# 3. Search for a wrong movie
- tapOn: "Search for a movie title..."
- inputText: "Titanic"
- pressKey: Enter

# DISMISS TOOLTIP 2 (Results Tip)
- extendedWaitUntil:
    visible: "Got it"
    timeout: 5000 
- tapOn: 
    text: "Got it"
    optional: true

# Select Titanic
- extendedWaitUntil:
    visible: "Titanic (1997)"
    timeout: 5000

- tapOn: "Titanic (1997)"

# Verify feedback
- extendedWaitUntil:
    visible: "Not quite! Try again."
    timeout: 3000

# 4. Use a Hint
- tapOn: "Need a Hint?.*" 
- tapOn: "Director"
- extendedWaitUntil:
    visible: "Christopher Nolan"
    timeout: 3000

# 5. Win the Game
- tapOn: "Search for a movie title..."
- inputText: "Inception"
- pressKey: Enter

- extendedWaitUntil:
    visible: "Inception (2010)"
    timeout: 3000
- tapOn: "Inception (2010)"

# 6. Verify Win State
- extendedWaitUntil:
    visible: "You Got It!"
    timeout: 5000
- assertVisible: "Share Your Result"

# 7. Verify Persistence
- tapOn: "Profile.*"
- extendedWaitUntil:
    visible: "Statistics"
    timeout: 5000

# Check stats exist
- assertVisible: "Games Played"
- assertVisible: "Current Streak"
