appId: com.unrealities.talkietrivia
---
- launchApp:
    clearState: true

# 0. Wait for Load
- extendedWaitUntil:
    visible: "Search for a movie title..."
    timeout: 45000

# Dismiss Tooltip 1 (Initial)
- tapOn:
    text: "Got it"
    optional: true

# 1. Make First Guess (Titanic) & Dismiss Tooltip 2
- tapOn: "Search for a movie title..."
- inputText: "Titanic"
- pressKey: Enter
- hideKeyboard

# WAIT & DISMISS TOOLTIP 2 (The "Pro Tip" one)
- extendedWaitUntil:
    visible: "Got it"
    timeout: 5000
- tapOn: "Got it"

# Select Titanic using ID selector
- extendedWaitUntil:
    visible:
      id: "result-item-Titanic"
    timeout: 5000
- tapOn:
    id: "result-item-Titanic"
- waitForAnimationToEnd

# 2. Make Remaining 4 Incorrect Guesses
- tapOn: "Search for a movie title..."
- inputText: "Avatar"
- pressKey: Enter
- hideKeyboard
- extendedWaitUntil:
    visible:
      id: "result-item-Avatar"
    timeout: 5000
- tapOn:
    id: "result-item-Avatar"
- waitForAnimationToEnd

- tapOn: "Search for a movie title..."
- inputText: "Matrix"
- pressKey: Enter
- hideKeyboard
- extendedWaitUntil:
    visible:
      id: "result-item-The Matrix"
    timeout: 5000
- tapOn:
    id: "result-item-The Matrix"
- waitForAnimationToEnd

- tapOn: "Search for a movie title..."
- inputText: "Shrek"
- pressKey: Enter
- hideKeyboard
- extendedWaitUntil:
    visible:
      id: "result-item-Shrek"
    timeout: 5000
- tapOn:
    id: "result-item-Shrek"
- waitForAnimationToEnd

# Final Guess (Game Over)
- tapOn: "Search for a movie title..."
- inputText: "Jaws"
- pressKey: Enter
- hideKeyboard
- extendedWaitUntil:
    visible:
      id: "result-item-Jaws"
    timeout: 5000
- tapOn:
    id: "result-item-Jaws"

# 3. Verify Loss State
- extendedWaitUntil:
    visible: "So Close!"
    timeout: 5000
- assertVisible: "Better luck next time."

# 4. Verify Correct Answer is Revealed
- assertVisible: "Your mind is the scene of the crime."

# 5. Verify Stats Reset
- tapOn: "Profile.*"
- scrollUntilVisible:
    element:
      text: "Current Streak"
    direction: DOWN
- assertVisible: "Current Streak"
